#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "make_const_nonconst.h"
#include "levels/rr2/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_rr2_entry[] = {
	INIT_LEVEL(),
	LOAD_YAY0(0x7, _rr2_segment_7SegmentRomStart, _rr2_segment_7SegmentRomEnd), 
	LOAD_YAY0(0xa, _clouds_skybox_yay0SegmentRomStart, _clouds_skybox_yay0SegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_YAY0(0x5, _group1_yay0SegmentRomStart, _group1_yay0SegmentRomEnd), 
	LOAD_RAW(0xc, _group1_geoSegmentRomStart, _group1_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_2), 
	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, rr2_area_1),
		WARP_NODE(0x0A, LEVEL_RR2, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF0, LEVEL_CASTLE, 0x02, 0x3A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CASTLE, 0x02, 0x6C, WARP_NO_CHECKPOINT),
		WARP_NODE(0x30, LEVEL_RR2, 0x01, 0x31, WARP_NO_CHECKPOINT),
		WARP_NODE(0x31, LEVEL_RR2, 0x01, 0x31, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_EXCLAMATION_BOX, 5736, 1222, 5111, 0, 0, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, 592, 422, 5477, 0, 0, 0, (5 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, 3197, 4514, 11379, 0, 0, 0, (5 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -1382, 2899, 13210, 0, 0, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, 1204, 965, -218, 0, 0, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_BLUE_COIN, -3194, 771, 11456, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -4010, 771, 11583, 0, 0, 0, (5 << 16), bhvBlueCoinSwitch),
		OBJECT(MODEL_BLUE_COIN, -2787, 1272, 11491, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -2350, 1098, 11487, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -1521, 1443, 11450, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -1521, 1826, 11450, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -1521, 2224, 11450, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -997, 2599, 11489, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -2563, 1211, 11491, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -2998, 1152, 11491, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -3106, 1005, 11491, 0, 0, 0, (5 << 16), bhvHiddenBlueCoin),
		OBJECT(MODEL_NONE, 6272, 1280, -6031, 0, -180, 0, 0x00000000, bhvCannon),
		OBJECT(MODEL_YELLOW_COIN, -2965, 49, 4997, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_NONE, 5527, 3358, 3863, 0, -180, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 1944, 22, 4890, 0, -90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 5503, 3333, -318, 0, -83, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 784, 2646, 11465, 0, -90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -1946, 22, 4882, 0, -90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 5, 22, 6855, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -3616, 771, 11163, 0, 0, 0, (0x02 << 16), bhvCoinFormation),
		OBJECT(MODEL_YELLOW_COIN, -3384, 253, 4172, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -4118, 425, 4087, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -4640, 605, 4690, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -4447, 794, 5474, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -2998, 1319, 4587, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -4524, 1960, 5429, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -3975, 3289, 5708, 0, 90, 0, (0x0A << 16), bhvOneCoin),
		OBJECT(MODEL_BOWLING_BALL, -4572, 1735, 4405, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -2893, 1254, 4889, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -3777, 2152, 5642, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -2983, 2518, 4540, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -2903, 3631, 4893, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -4191, 4420, 5547, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -4440, 2925, 4496, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -4551, 2921, 4404, 0, 120, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_NONE, -2510, 168, 4331, 0, 90, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -4367, 638, 4442, 0, -121, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -4367, 797, 4442, 0, -121, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -3511, 1195, 5558, 0, 17, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -3222, 1516, 4503, 0, 120, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -3223, 2642, 4501, 0, 130, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -4337, 3020, 4396, 0, -124, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -3214, 3806, 4514, 0, 129, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -3214, 3917, 4514, 0, 129, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_NONE, -3214, 4052, 4514, 0, 129, 0, 0x00000000, bhvFlamethrower),
		OBJECT(MODEL_GOOMBA, 4606, 622, 5111, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 3809, 322, 4694, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 5366, 922, 4768, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 502, 4417, 10881, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 641, 4608, 13010, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 3001, 4214, 12858, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 6794, 2304, -11553, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 6358, 2304, -11550, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 6534, 2304, -11274, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_GOOMBA, 5944, 1280, -4675, 0, 0, 0, 0x00000000, bhvGoomba),
		OBJECT(MODEL_HEAVE_HO, 2243, 2881, 12324, 0, 0, 0, 0x00000000, bhvHeaveHo),
		OBJECT(MODEL_HEAVE_HO, 8, 22, 2938, 0, 0, 0, 0x00000000, bhvHeaveHo),
		MARIO_POS(0x01, 90, 0, 22, 4900),
		OBJECT(MODEL_NONE, 0, 22, 4900, 0, 90, 0, (0x0A << 16), bhvInstantActiveWarp),
		OBJECT(MODEL_PURPLE_SWITCH, 712, 795, -2319, 0, 90, 0, 0x00000000, bhvFloorSwitchHiddenObjects),
		OBJECT(MODEL_BREAKABLE_BOX, 1142, 788, -2580, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1142, 788, -2780, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1342, 788, -2580, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1342, 788, -2780, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1142, 953, -2961, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1342, 953, -2961, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1142, 953, -3161, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1342, 953, -3161, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1499, 1125, -2961, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1699, 1125, -2961, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1499, 1125, -3161, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1699, 1125, -3161, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1499, 1484, -2505, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1699, 1484, -2505, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1499, 1484, -2705, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1699, 1484, -2705, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1920, 1721, -2505, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 2120, 1721, -2505, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 1920, 1721, -2705, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 2120, 1721, -2705, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 2485, 1721, -2221, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 2685, 1721, -2221, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 2485, 1721, -2421, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 2685, 1721, -2421, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3043, 1721, -2742, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3243, 1721, -2742, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3043, 1721, -2942, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3243, 1721, -2942, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3782, 1721, -2573, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3982, 1721, -2573, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3782, 1721, -2773, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 3982, 1721, -2773, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4427, 1721, -3361, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4627, 1721, -3361, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4427, 1721, -3561, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4627, 1721, -3561, 0, 90, 0, 0x00000000, bhvHiddenObject),
		OBJECT(MODEL_RED_COIN, 3201, 2187, 445, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_TRANSPARENT_STAR, 6320, 3358, 3900, 0, 90, 0, 0x00000000, bhvRedCoinStarMarker),
		OBJECT(MODEL_RED_COIN, 2398, 3456, 6, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 6058, 4166, -2066, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 6810, 2081, -2464, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 8283, 1927, -1001, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 9125, 3815, 1638, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 8770, 2388, 3878, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 8662, 4737, -296, 0, 90, 0, (0x02 << 16), bhvRedCoin),
		OBJECT(MODEL_STAR, -3814, 4913, 4929, 0, 90, 0, (0x00 << 24), bhvStar),
		OBJECT(MODEL_STAR, 1212, 5011, 8573, 0, 90, 0, (0x01 << 24), bhvStar),
		OBJECT(MODEL_NONE, 6320, 3554, 3900, 0, 90, 0, (0x02 << 24), bhvHiddenRedCoinStar),
		OBJECT(MODEL_STAR, 6535, 3284, -12462, 0, 90, 0, (0x03 << 24), bhvStar),
		OBJECT(MODEL_NONE, 6653, 1280, -5675, 0, -180, 0, (0x10 << 24) | (0x30 << 16), bhvFadingWarp),
		OBJECT(MODEL_NONE, 0, 1844, 4898, 0, -180, 0, (0x10 << 24) | (0x31 << 16), bhvFadingWarp),
		TERRAIN(rr2_area_1_collision),
		MACRO_OBJECTS(rr2_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_SLIDE),
		TERRAIN_TYPE(TERRAIN_STONE),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),
	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 90, 0, 22, 4900),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};